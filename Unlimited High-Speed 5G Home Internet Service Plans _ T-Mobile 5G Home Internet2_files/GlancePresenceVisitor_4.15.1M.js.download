(function() {var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ba(){ba=function(){};h.Symbol||(h.Symbol=ca)}var da=0;function ca(a){return"jscomp_symbol_"+(a||"")+da++}
function l(){ba();var a=h.Symbol.iterator;a||(a=h.Symbol.iterator=h.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ea(this)}});l=function(){}}function ea(a){var b=0;return fa(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function fa(a){l();a={next:a};a[h.Symbol.iterator]=function(){return this};return a}for(var m=h,n=["Array","from"],p=0;p<n.length-1;p++){var q=n[p];q in m||(m[q]={});m=m[q]}
var ga=n[n.length-1],r=m[ga],t=r?r:function(a,b,c){l();b=b?b:function(a){return a};var d=[],f=a[Symbol.iterator];if("function"==typeof f)for(a=f.call(a);!(f=a.next()).done;)d.push(b.call(c,f.value));else for(var f=a.length,g=0;g<f;g++)d.push(b.call(c,a[g]));return d};t!=r&&null!=t&&aa(m,ga,{configurable:!0,writable:!0,value:t});/*
 Copyright 2019 Glance Networks, Inc.
*/
var ha=["4","15","1","1"].slice(0,3).join(".");function v(a){for(a=a.toString();2>a.length;)a="0"+a;return a}Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(a,b){return new Uint8Array(this.subarray(a,b))});
ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(a,b){void 0===a&&(a=0);void 0===b&&(b=this.byteLength);a=Math.floor(a);b=Math.floor(b);0>a&&(a+=this.byteLength);0>b&&(b+=this.byteLength);a=Math.min(Math.max(0,a),this.byteLength);b=Math.min(Math.max(0,b),this.byteLength);if(0>=b-a)return new ArrayBuffer(0);var c=new ArrayBuffer(b-a),d=new Uint8Array(c),f=new Uint8Array(this,a,b-a);d.set(f);return c});
var w=navigator.userAgent.toLowerCase(),ia=w.match(/(edge)[\s\/:]([\w\d\.]+)?/)||w.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||w.match(/(rv):([\w\d\.]+)/)||[null,"unknown",0];"rv"===ia[1]&&(ia[1]="ie");/*
 Copyright 2017 Glance Networks, Inc.
*/
function ka(a){for(var b=new Date,b=b.getUTCFullYear()+"/"+(b.getUTCMonth()+1)+"/"+b.getUTCDate()+" "+v(b.getUTCHours())+":"+v(b.getUTCMinutes())+":"+v(b.getUTCSeconds())+" ",c=0;c<a.length;c++)b+=("object"===typeof a[c]?JSON.stringify(a[c]):a[c])+" ";return b}function x(a){window.console&&window.console.log&&(window.GLANCE_COBROWSE?!window.GLANCE_COBROWSE.disableLogging:1)&&window.console.log(ka(arguments))};/*
 Copyright (c) 2018 Glance Networks, Inc.
*/
var y=y||{};window.GLANCE=window.GLANCE||{};window.GLANCE.VERSION="4.15.1.1";window.GLANCE.PATCH="";var z=navigator.userAgent.toLowerCase(),la=navigator.platform.toLowerCase(),A=z.match(/(edge)[\s\/:]([\w\d\.]+)?/)||z.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||z.match(/(rv):([\w\d\.]+)/)||[null,"unknown",0];"rv"===A[1]&&(A[1]="ie");
var B={extend:Function.prototype.extend,name:"version"==A[1]?A[3]:A[1],version:"ie"==A[1]&&document.documentMode||parseFloat("opera"==A[1]&&A[4]?A[4]:A[2]),u:{name:z.match(/ip(?:ad|od|hone)/)?"ios":(z.match(/(?:webos|android)/)||la.match(/mac|win|linux/)||["other"])[0]},S:{W:!!document.evaluate,U:!!window.runtime,query:!!document.querySelector,json:!!window.JSON},T:{}};
document.documentMode&&window.XDomainRequest?(B.name="ie",B.version=document.documentMode):window.navigator&&navigator.appVersion&&-1!=navigator.appVersion.indexOf("MSIE 7.")&&(B.name="ie",B.version="7");B[B.name]=!0;B[B.name+parseInt(B.version,10)]=!0;B.u[B.u.name]=!0;
if("undefined"!==typeof window.Prototype&&1.7>parseFloat(window.Prototype.Version.substr(0,3))&&"undefined"!==typeof Array.prototype.toJSON)var C=function(a){var b=Array.prototype.toJSON;delete Array.prototype.toJSON;a=JSON.stringify(a);Array.prototype.toJSON=b;return a};void 0===C&&(C=function(a){return JSON.stringify(a)});
function ma(a){a.onmessage=function(b){b=JSON.parse(b.data);a.C&&a.C(b)};a.s=function(b){b=C(b);a.send(b)};a.H=function(a){return a&&a.code||0};a.I=function(a){return a&&a.reason||""}}
function na(a){var b={},c;y.P?c=new D(a):(B.ie9&&"http:"===window.location.protocol&&(b.protocols_whitelist=["iframe-eventsource","iframe-htmlfile"]),c=new SockJS(a,"",b));c.l=0;c.F=function(){c.w();c.transport&&!c.transport.match(/^iframe-/)&&(c.A=window.setInterval(function(){c.l++;c.M&&c.M({l:c.l})},15E3))};c.w=function(){c.A&&window.clearInterval(c.A)};ma(c);c.onclose=function(a){c.w();c.K&&c.K(a)};c.onheartbeat=function(){c.l=0;c.F();c.L&&c.L()};return c}
function E(a,b){window.setTimeout(function(){E(a,b)},100)}function D(a){this.readyState=SockJS.CONNECTING;this.a=Math.round(1E6*Math.random());F=F||{};F[this.a]=this;E({from:"GSockJSProxy",sockid:this.a,cmd:"open",url:a})}var F;D.prototype.send=function(a){E({from:"GSockJSProxy",sockid:this.a,cmd:"send",data:a})};D.prototype.close=function(){this.readyState=SockJS.CLOSING;E({from:"GSockJSProxy",sockid:this.a,cmd:"close"})};
function G(a,b,c){void 0!==a&&(c=c||Object.keys(a),c.forEach(function(c){void 0!==a[c]&&(b[c]=a[c])}))}function oa(a){var b=a.func.split(".");if("GLANCE"!==b[0])H("ERR_BADINVOKE:"+b[0]);else{for(var c=window.GLANCE,d=1;d<b.length;d++)if(c=c[b[d]],!c){H("ERR_UNDEFINVOKE:"+b[d]);return}a.args=a.args||{};a.args.remote=!0;c(a.args)}}function I(a){y.P?this.f=new J(a):this.a=this.g();this.response=null;this.type=a}I.prototype.g=function(){return new window.XMLHttpRequest};
window.Sarissa&&Sarissa._SARISSA_IS_IE&&!(new window.XMLHttpRequest).withCredentials&&!window.XDomainRequest&&(I.prototype.g=function(){K("Sarissa");return Sarissa.originalXMLHttpRequest?new Sarissa.originalXMLHttpRequest:new window.XMLHttpRequest});I.prototype.abort=function(){this.f?this.f.abort():this.a.abort()};
I.prototype.onreadystatechange=function(){if(4==this.a.readyState){window.clearTimeout(this.h);delete this.h;var a="error";if(0==this.a.status)K(this.method+" to "+this.url+" failed: network"),this.b(!0,"connection",this.a.status);else if(200!==this.a.status){H(this.method+" to "+this.url+" failed with status: "+this.a.status);"text"===this.a.responseType&&null!==this.a.responseText&&K(this.a.responseText);if(401===this.a.status||403===this.a.status)a="authorization",this.c&&this.c.V();this.b(!1,
a,this.a.status)}else{if(""!==this.a.response){if("XML"===this.accept)this.response=this.a.responseXML&&this.a.responseXML.documentElement,null===this.response&&H("Invalid XML response: "+this.a.responseText);else if(this.m){for(var b=new Uint8Array(this.a.responseText.length),c=0;c<this.a.responseText.length;c++)b[c]=this.a.responseText.charCodeAt(c)&255;this.response=new Blob([b],{type:this.a.getResponseHeader("Content-Type")})}else if("blob"===this.a.responseType)this.response=this.a.response;
else if(this.a.responseXML)this.response=pa(this.a.responseXML.childNodes[0].childNodes[0].nodeValue);else if("HTML"===this.accept||"TEXT"===this.accept)this.response=this.a.responseText;else if(this.response=pa(this.a.responseText),null===this.response){K(this.method+" to "+this.url+" failed - can't parse response "+this.a.responseText);this.b(!1,a);return}if(void 0!==this.response.err&&void 0!==this.response.msg){K(this.method+" to "+this.url+" failed with error:"+this.response.err+" "+this.response.msg);
this.b(!1,a);return}}this.onsuccess(this.response)}}};function pa(a){var b=null;try{b=JSON.parse(a)}catch(c){return K("JSON parse failed with error: "+c.toString()+" parsing: "+a),null}return b}I.prototype.getResponseHeader=function(a){return this.a.getResponseHeader(a)};I.prototype.get=function(a,b,c,d,f){this.method="GET";L(this,a,null,b,c,d,f)};
function L(a,b,c,d,f,g,e){a.url=b;a.onsuccess=void 0!==g?g:function(){};a.b=void 0!==e?e:function(){};a.method=a.method||"POST";if(a.f)qa(a.f,b,c,d,f,g,e);else{g=a.o||("JSON"===a.type?"application/json; charset=utf-8":"application/x-www-form-urlencoded; charset=utf-8");var u;"string"===typeof c?u=c:c instanceof Blob?(g=c.type,u=c):c&&(u="JSON"===a.type?C(c):"data="+C(c));B.safari&&a.j&&(a.h=window.setTimeout(function(){K(this.method+" to "+this.url+" failed - timedout (Safari)");this.b(!1,"timedout")}.bind(a),
a.j));a.a.onreadystatechange=function(){a.onreadystatechange()};try{a.a.open(a.method,b,d),void 0!==a.i&&a.a.setRequestHeader("Accept",a.i),void 0!==a.a.setRequestHeader&&"GET"!==a.method&&a.a.setRequestHeader("Content-type",g),a.c&&a.c.J()&&a.a.setRequestHeader("Authorization","Bearer "+a.c.J()),a.a.withCredentials=f,a.a.send(u)}catch(ja){K(a.method+" to "+b+" failed with: "+ja.toString()),a.b(!1,ja.toString())}}}function J(a){this.type=a}
function qa(a,b,c,d,f,g,e){a.onsuccess=g;a.b=e;E({from:"IFrameProxyRequest",type:a.type,url:b,obj:c,async:d,withcred:f})}J.prototype.abort=function(){J.postMessage({from:"IFrameProxyRequest",abort:!0})};function M(a){this.name=a}function ra(a,b){var c=new Date;c.setUTCHours(c.getUTCHours()+8);localStorage.setItem(a.name,C(b));localStorage.setItem(a.name+"_exp",c.toGMTString())}function sa(a){if(!ta(a))return null;a=localStorage.getItem(a.name);return JSON.parse(a)}
function ua(a,b){var c=new Date;c.setUTCMinutes(c.getUTCMinutes()+b);localStorage.setItem(a.name+"_exp",c.toGMTString())}M.prototype.get=function(){return ta(this)?localStorage.getItem(this.name):null};function ta(a){var b=localStorage.getItem(a.name+"_exp");if(!b)return!1;b=new Date(b);return b<new Date?(localStorage.removeItem(a.name),localStorage.removeItem(a.name+"_exp"),!1):!0}
function N(a){this.a=a.document;this.c=a;var b=[["hidden","visibilitychange"],["mozHidden","mozvisibilitychange"],["webkitHidden","webkitvisibilitychange"],["msHidden","msvisibilitychange"],["oHidden","ovisibilitychange"]];for(a=0;a<b.length;a++)if(b[a][0]in document){this.b=b[a][0];this.f=b[a][1];break}}
function va(a,b){var c=[["src","//www.glancecdn.net/cobrowse/js/sockjs1.0.2.min.js"]],d=a.a.createElement("script");b&&d.addEventListener("load",b);d.setAttribute("type","text/javascript");d.setAttribute("charset","UTF-8");for(var f=0;f<c.length;f++)d.setAttribute(c[f][0],c[f][1]);a.a.head.appendChild(d)}function O(a){return void 0===a.b?!1:a.a[a.b]}function wa(a,b){a.addEventListener(a.f,b)}N.prototype.head=function(){return void 0!==this.a.head?this.a.head:xa("getElementsByTagName",this.a,"head")[0]};
N.prototype.addEventListener=function(a,b,c){this.a.addEventListener(a,b,c)};N.prototype.removeEventListener=function(a,b,c){this.a.removeEventListener(a,b,c)};function H(a){window.console&&window.console.error&&window.console.error(a)}function K(a){window.console&&window.console.log&&(window.GLANCE_COBROWSE?!window.GLANCE_COBROWSE.disableLogging:1)&&window.console.log(a)}function P(a){this.element=a}P.prototype.addEventListener=function(a,b,c){this.element.addEventListener(a,b,c)};
P.prototype.removeEventListener=function(a,b,c){this.element.removeEventListener(a,b,c)};function xa(){var a=Array.from(arguments),b=a[0],c=a[1],a=a.slice(2,a.length);return P.b&&P.a&&c.nodeType?"#document"===c.nodeName?P.a.document[b].apply(c,a):"#document-fragment"===c.nodeName?P.a.DocumentFragment.prototype[b].apply(c,a):"[object Window]"===c.toString()?P.a.window[b].apply(c,a):P.a.document.body[b].apply(c,a):c[b].apply(c,a)};function ya(a,b){var c;a&&(c=c||Object.keys(a),c.forEach(function(c){void 0!==a[c]&&(b[c]=a[c])}))}function za(a){var b={};if(!a)return b;var c=0;for(a=a.attributes;c<a.length;c++){var d=a[c].nodeName.match(/data-(.*)/);d&&2===d.length&&(b[d[1]]=a[c].nodeValue)}return b}function Aa(){var a=window.GLANCE_COBROWSE?window.GLANCE_COBROWSE:{},b=document.getElementById("glance-cobrowse"),c=za(document.getElementById("cobrowsescript")),b=za(b);ya(c,a);ya(b,a);return a};function Q(){}function Ba(a,b){a.m="undefined"===typeof WebSocket;a.a={};a.a.ws="www.glance.net";a.a.site="production";a.g=new N(window);G(Aa(),a.a);G(b,a.a);delete a.a.presenceserver;a.j=[];a.f=R;a.o=new M("glance_presence");var c=sa(a.o);c&&(a.c=c.directserver)}var R=1;Q.prototype.B=function(){};
function S(a,b,c,d,f){if(b&&!a.c)x("ERR_NODIRECTSERVER");else{var g=(f||"https")+"://"+(b?a.c:a.a.presenceserver)+"/"+c;d&&(g+="?",["groupid","visitorid"].forEach(function(c){g+=c+"="+a.a[c]+"&"}));return g}}Q.prototype.D=function(a){Ca(this,"findvisitor","GET",a)};
function T(a){x("connecting to "+a.c);var b=!1;a.m&&!window.SockJS?va(a.g,function(){b||(b=!0,window.SockJS?T(a):x("ERR_NOSOCKJS"))}):(a.b&&a.b.close(),a.b=Da(a),a.b.N=a.c,a.b.onopen=function(){a.b.s({type:"connect",authorization:void 0,groupid:a.a.groupid,visitorid:a.a.visitorid,version:ha});a.j.forEach(function(c){a.b.s(c)});a.j=[];a.f=3},a.b.C=function(c){x("received:"+C(c));if(a.b){var b=c.mtype||c.type,f=c.data;switch(b){case "connected":if(a.a.nokeepalive)break;a.h||(a.h=window.setInterval(function(){a.b.s({type:"k"})},
1E3*c.keepalive));break;case "invoke":"visitor"===a.R&&oa(f);break;default:if(a["on"+b])a["on"+b](f)}}},a.b.onclose=function(b){a.b===this&&(x("Connection closed, reconnecting",this.H(b),this.I(b)),Ea(a),window.setTimeout(function(){a.connect()},2E3))},a.b.onerror=function(b){a.b===this&&(a.m=!0,a.b.onclose(b))})}
function Ca(a,b,c,d){function f(a){var b=a&&(a.directserver||a.direct);b&&(e.c=b,a.httpsport&&(e.c+=":"+a.httpsport),e.B());e.b&&e.c!=e.b.N&&T(e);if(d&&d.onsuccess)d.onsuccess(a)}function g(a,c){x(b,"failed");if(d.onfail)d.onfail(c);else Fa(e,{error:"connfail",detail:c})}var e=a,u=new I("JSON");u.c=void 0;u.method=c;x(b,JSON.stringify(d));(function(a){if(e.a.presenceserver)return a();var b=new M("glance_visitor_settings_"+e.a.groupid+"_"+e.a.site),c=sa(b);if(c)return e.a.presenceserver=c.presenceserver,
e.a.presenceserver||x("PRES_DISABLED (from cache)"),a();var c=new I("JSON"),d="https://"+e.a.ws+"/services/authorizationservice/GetVisitorSettings3?groupid="+e.a.groupid+"&site="+e.a.site+"&service=presence";c.method="GET";L(c,d,null,!0,!1,function(c){e.a.presenceserver=c.presenceUrl;e.a.presenceserver||x("PRES_DISABLED");var d={};d.presenceserver=e.a.presenceserver;d.presencesettings=c;ra(b,d);ua(b,1440);return a()},function(b,c){x("PRES_UNAVAILABLE "+c);a()})})(function(){e.a.presenceserver&&L(u,
S(e,!1,b,!0),d.data?d.data:{},!0,!0,f,g)})}function U(a){a.b&&a.b.close();Ea(a)}function Ea(a){a.h&&(window.clearInterval(a.h),delete a.h);a.f=R;delete a.b;delete a.c}function V(a,b){x("sending",b.type,a.f);3===a.f?a.b.s(b):(a.j.push(b),a.connect())}
Q.prototype.connect=function(){if(!this.a.visitorid)x("CONN_NOVISITORID");else if(this.f===R){this.f=2;var a=this;this.onscaledown=function(){a.disconnect();a.connect()};this.c?T(this):this.D({onsuccess:function(){x("found visitor, connect");T(a)},onfail:function(b){Fa(a,{error:"connfail",detail:b});a.f=R}})}};Q.prototype.connect=Q.prototype.connect;Q.prototype.disconnect=function(){U(this)};Q.prototype.disconnect=Q.prototype.disconnect;
function Fa(a,b){x("Error: ",JSON.stringify(b));if(a.onerror)a.onerror(b)}Q.prototype.G=function(a,b){V(this,{type:a,data:b})};Q.prototype.fire=Q.prototype.G;function W(a){Ba(this,a);this.R="visitor";this.g=new N(window);var b=this;xa("addEventListener",window,"focus",function(){b.i=!1;b.O&&b.v()},void 0);wa(this.g,function(){x("visibility:",O(b.g)?"hidden":"visible");if(3===b.f&&!b.i){var a={type:"visibility"};a.data={visibility:O(b.g)?"hidden":"visible"};V(b,a);O(b.g)&&U(b)}});W.instance=this}var Ga=W,X=["GLANCE","Presence","Visitor"],Y=this;X[0]in Y||!Y.execScript||Y.execScript("var "+X[0]);
for(var Z;X.length&&(Z=X.shift());){var Ha;if(Ha=!X.length)Ha=void 0!==Ga;Ha?Y[Z]=Ga:Y[Z]?Y=Y[Z]:Y=Y[Z]={}}W.prototype=new Q;W.prototype.B=function(){var a={};a.directserver=this.c;ra(this.o,a);ua(this.o,20)};
W.prototype.v=function(a){if(this.a.visitorid){var b={};G(this.a,b,["groupid","visitorid"]);var c={},d;for(d in this.a)d.indexOf("user-")||(c[d.substring(5)]=this.a[d]);c.url=window.location.href;c.browser=B.name;c.browserver=B.version;c.platform=B.u.name;(a=a&&a.data)&&G(a,c);b.data=c;this.i||(c={type:"presence"},c.data=b.data,V(this,c),this.O=!0)}else x("PRES_NOVISITORID")};W.prototype.presence=W.prototype.v;
function Da(a){a.m?a=na(S(a,!0,"visitor")):(a=S(a,!0,"visitorws",!1,"wss"),a=new WebSocket(a),ma(a));return a}W.prototype.D=function(a){a.data={};Ca(this,"presence","POST",a)};W.prototype.onblur=function(){x("BLURRED");this.i=!0;U(this)};var Ia=!1;function Ja(){if(!Ia){Ia=!0;var a=Aa();if(a.presence&&"api"!==a.presence){var b=new W;b.onerror=function(a){"connfail"===a.error&&window.setTimeout(function(){b.connect()},5E3)};b.v()}}}var Ka=new N(window);
Ka.c.addEventListener&&(document.readyState.match(/complete/)?Ja():(Ka.c.addEventListener("load",Ja),Ka.a.addEventListener("DOMContentLoaded",Ja,!1)));}).call(window);
