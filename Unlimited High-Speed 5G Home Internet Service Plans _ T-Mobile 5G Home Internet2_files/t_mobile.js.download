function __xx_checkJquery(){function e(){triggermail.__tm_initialized||(window.jQuery?(triggermail.initialize(),triggermail.__tm_initialized=!0):window.setTimeout(e,100))}if(window.jQuery){!function(){var e=!1,t=/var xyz/.test(function(){})?/\b_super\b/:/[\D|\d]*/;this.__tmClass=function(){},window.__tmClass=this.__tmClass,__tmClass.extend=function(i){function r(){!e&&this.init&&this.init.apply(this,arguments)}var n=this.prototype;e=!0;var o=new this;e=!1;for(var a in i)o[a]="function"==typeof i[a]&&"function"==typeof n[a]&&t.test(i[a])?function(e,t){return function(){var i=this._super;this._super=n[e];var r=t.apply(this,arguments);return this._super=i,r}}(a,i[a]):i[a];return r.prototype=o,r.prototype.constructor=r,r.extend=arguments.callee,window.__tmClass=r,r}}(),window._c2pService=window._c2pService||[],window.triggermail={config:{eventSource:"custom_integration",encodeCookie:!1,secureCookie:!1}},window.console?void 0===window.console.debug&&(console.debug=function(){}):console={debug:function(){},error:function(){},log:function(){}},window.TM_API_HOST="api.bluecore.app/api",window.triggermail.__tm_iver=1636382455,window.triggermail.lytics=[],triggermail.lytics.__SV=1.2,function(e){function t(){t.done||(t.done=!0,b=!0,h=!1,y.each(D,function(e){e._dom_loaded()}))}function i(){try{l.documentElement.doScroll("left")}catch(e){return void setTimeout(i,1)}t()}var r=Array.prototype,n=Object.prototype,o=r.slice,a=n.toString,c=n.hasOwnProperty,s=window.console,u=window.navigator,l=window.document,d=u.userAgent,p=["__mps","__mpa","__mpap","$people_distinct_id","__alias"],g=!1;try{var g=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}var f="https:"==l.location.protocol?"https://":"http://",m=e&&e.__SV||0,_=g,h=!_&&-1==d.indexOf("MSIE"),y={},v=!1,k={api_host:f+TM_API_HOST,cross_subdomain_cookie:!0,cookie_name:window.triggermail.custom_cookie_name||"",loaded:function(){},store_google:!1,save_referrer:!0,test:!1,verbose:!1,img:!1,track_pageview:!0,debug:!1,live_demo:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_cookie:!1,ip:!0},b=!1;!function(){var e=r.forEach,t=r.indexOf,i=Array.isArray,n={},s=y.each=function(t,i,r){if(null!=t)if(e&&t.forEach===e)t.forEach(i,r);else if(t.length===+t.length){for(var o=0,a=t.length;o<a;o++)if(o in t&&i.call(r,t[o],o,t)===n)return}else for(var s in t)if(c.call(t,s)&&i.call(r,t[s],s,t)===n)return};y.addEvent=function(e,t,i,r){function n(e,t){return e?e.matches(t)?e:n(e.parentElement,t):null}if(window.jQuery)jQuery(e).on&&r?jQuery(e).on(t,r,i):jQuery(e)[t](i);else{Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);var o;e.attachEvent?(o=e.attachEvent,t="on"+t):o=e.addEventListener;var a;a="string"==typeof e?l.querySelectorAll(e):[e];for(var c=0;c<a.length;c++)r?o.apply(a[c],[t,function(e){var t=e||window.event,o=n(t.target||t.srcElement,r);o&&i.call(o,e)}]):o.apply(a[c],[t,i.bind(a[c])])}},y.getJSON=function(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.onload=function(){if(i.status>=200&&i.status<400){var e=JSON.parse(i.responseText);t(e)}},i.send()},y.removeEvent=function(e,t,i){e.detachEvent?e.detachEvent("on"+t,i):e.removeEventListener(t,i)},y.extend=function(e){return s(o.call(arguments,1),function(t){for(var i in t)void 0!==t[i]&&(e[i]=t[i])}),e},y.isArray=i||function(e){return"[object Array]"===a.call(e)},y.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},y.isArguments=function(e){return!(!e||!c.call(e,"callee"))},y.toArray=function(e){return e?e.toArray?e.toArray():y.isArray(e)?o.call(e):y.isArguments(e)?o.call(e):y.values(e):[]},y.values=function(e){var t=[];return null==e?t:(s(e,function(e){t[t.length]=e}),t)},y.identity=function(e){return e},y.include=function(e,i){var r=!1;return null==e?r:t&&e.indexOf===t?-1!=e.indexOf(i):(s(e,function(e){if(r||(r=e===i))return n}),r)},y.includes=function(e,t){return-1!==e.indexOf(t)}}();var w=function(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,r){return e.call(t,i,r)};case 3:return function(i,r,n){return e.call(t,i,r,n)};case 4:return function(i,r,n,o){return e.call(t,i,r,n,o)}}return function(){return e.apply(t,arguments)}},x=Math.pow(2,53)-1,O=function(e){return function(t){return null==t?void 0:t[e]}}("length"),E=function(e){var t=O(e);return"number"==typeof t&&t>=0&&t<=x},S=function(e,t,i){return null==e?y.identity:y.isFunction(e)?w(e,t,i):y.isObject(e)?y.matcher(e):y.property(e)};y.map=y.collect=function(e,t,i){t=S(t,i);for(var r=!E(e)&&y.keys(e),n=(r||e).length,o=Array(n),a=0;a<n;a++){var c=r?r[a]:a;o[a]=t(e[c],c,e)}return o},y.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},y.isObject=function(e){return e===Object(e)&&!y.isArray(e)},y.isEmptyObject=function(e){if(y.isObject(e)){for(var t in e)if(c.call(e,t))return!1;return!0}return!1},y.isUndefined=function(e){return void 0===e},y.isString=function(e){return"[object String]"==a.call(e)},y.isDate=function(e){return"[object Date]"==a.call(e)},y.isNumber=function(e){return"[object Number]"==a.call(e)},y.encodeDates=function(e){return y.each(e,function(t,i){y.isDate(t)?e[i]=y.formatDate(t):y.isObject(t)&&(e[i]=y.encodeDates(t))}),e},y.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())},y.strip_empty_properties=function(e){var t={};return y.each(e,function(e,i){y.isString(e)&&e.length>0&&(t[i]=e)}),t},y.truncate=function(e,t){var i;return"string"==typeof e?i=e.slice(0,t):y.isArray(e)?(i=[],y.each(e,function(e){i.push(y.truncate(e,t))})):y.isObject(e)?(i={},y.each(e,function(e,r){i[r]=y.truncate(e,t)})):i=e,i},y.trim=function(e){return String.prototype.trim?String(e).trim():this.replace(/^\s+|\s+$/g,"")},y.JSONEncode=function(){return function(e){var t=e,i=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=i[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},r=function(e,t){var n="",o=0,s="",u="",l=0,d=n,p=[],g=t[e];switch(typeof g){case"string":return i(g);case"number":return isFinite(g)?String(g):"null";case"boolean":case"null":return String(g);case"object":if(!g)return"null";if(n+="    ",p=[],"[object Array]"===a.apply(g)){for(l=g.length,o=0;o<l;o+=1)p[o]=r(o,g)||"null";return u=0===p.length?"[]":n?"[\n"+n+p.join(",\n"+n)+"\n"+d+"]":"["+p.join(",")+"]",n=d,u}for(s in g)c.call(g,s)&&(u=r(s,g))&&p.push(i(s)+(n?": ":":")+u);return u=0===p.length?"{}":n?"{"+p.join(",")+d+"}":"{"+p.join(",")+"}",n=d,u}};return r("",{"":t})}}(),y.JSONDecode=function(){var e,t,i,r,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(t){throw{name:"SyntaxError",message:t,at:e,text:i}},a=function(r){return r&&r!==t&&o("Expected '"+r+"' instead of '"+t+"'"),t=i.charAt(e),e+=1,t},c=function(){var e,i="";for("-"===t&&(i="-",a("-"));t>="0"&&t<="9";)i+=t,a();if("."===t)for(i+=".";a()&&t>="0"&&t<="9";)i+=t;if("e"===t||"E"===t)for(i+=t,a(),"-"!==t&&"+"!==t||(i+=t,a());t>="0"&&t<="9";)i+=t,a();if(e=+i,isFinite(e))return e;o("Bad number")},s=function(){var e,i,r,c="";if('"'===t)for(;a();){if('"'===t)return a(),c;if("\\"===t)if(a(),"u"===t){for(r=0,i=0;i<4&&(e=parseInt(a(),16),isFinite(e));i+=1)r=16*r+e;c+=String.fromCharCode(r)}else{if("string"!=typeof n[t])break;c+=n[t]}else c+=t}o("Bad string")},u=function(){for(;t&&t<=" ";)a()},l=function(){switch(t){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+t+"'")},d=function(){var e=[];if("["===t){if(a("["),u(),"]"===t)return a("]"),e;for(;t;){if(e.push(r()),u(),"]"===t)return a("]"),e;a(","),u()}}o("Bad array")},p=function(){var e,i={};if("{"===t){if(a("{"),u(),"}"===t)return a("}"),i;for(;t;){if(e=s(),u(),a(":"),Object.hasOwnProperty.call(i,e)&&o('Duplicate key "'+e+'"'),i[e]=r(),u(),"}"===t)return a("}"),i;a(","),u()}}o("Bad object")};return r=function(){switch(u(),t){case"{":return p();case"[":return d();case'"':return s();case"-":return c();default:return t>="0"&&t<="9"?c():l()}},function(n){var a;return i=n,e=0,t=" ",a=r(),u(),t&&o("Syntax error"),a}}(),y.base64Encode=function(e){var t,i,r,n,o,a,c,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,d=0,p="",g=[];if(!e)return e;e=y.utf8Encode(e);do{t=e.charCodeAt(l++),i=e.charCodeAt(l++),r=e.charCodeAt(l++),s=t<<16|i<<8|r,n=s>>18&63,o=s>>12&63,a=s>>6&63,c=63&s,g[d++]=u.charAt(n)+u.charAt(o)+u.charAt(a)+u.charAt(c)}while(l<e.length);switch(p=g.join(""),e.length%3){case 1:p=p.slice(0,-2)+"==";break;case 2:p=p.slice(0,-1)+"="}return p},y.utf8Encode=function(e){return unescape(encodeURIComponent(e))},y.UUID=function(){var e=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},t=function(){return Math.random().toString(16).replace(".","")},i=function(e){function t(e,t){var i,r=0;for(i=0;i<t.length;i++)r|=o[i]<<8*i;return e^r}var i,r,n=d,o=[],a=0;for(i=0;i<n.length;i++)r=n.charCodeAt(i),o.unshift(255&r),o.length>=4&&(a=t(a,o),o=[]);return o.length>0&&(a=t(a,o)),a.toString(16)};return function(){var r=(screen.height*screen.width).toString(16);return e()+"-"+t()+"-"+i()+"-"+r+"-"+e()}}(),y.isBlockedUA=function(){return!!/(google web preview|baiduspider|yandexbot)/i.test(d)},y.HTTPBuildQuery=function(e,t){var i,r,n=[];return void 0===t&&(t="&"),y.each(e,function(e,t){i=encodeURIComponent(e.toString()),r=encodeURIComponent(t),n[n.length]=r+"="+i}),n.join(t)},y.getQueryParam=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+t+"=([^&#]*)",r=new RegExp(i),n=r.exec(e);return null===n||n&&"string"!=typeof n[1]&&n[1].length?"":decodeURIComponent(n[1]).replace(/\+/g," ")},y.cookie={get:function(e){for(var t=e+"=",i=l.cookie.split(";"),r=0;r<i.length;r++){for(var n=i[r];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t)){var o=n.substring(t.length,n.length);return triggermail.config.encodeCookie?y.cookie.decode(o):decodeURIComponent(o)}}return null},parse:function(e){var t;try{t=y.JSONDecode(y.cookie.get(e))||{}}catch(e){}return t},set:function(e,t,i,r){var n="",o="",a="";if(r){var c=l.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),s=c?c[0]:"";n=s?"; domain=."+s:""}if(i){var u=new Date;u.setTime(u.getTime()+24*i*60*60*1e3),o="; expires="+u.toGMTString()}t=triggermail.config.encodeCookie?y.cookie.encode(t):encodeURIComponent(t),triggermail.config.secureCookie&&(a=";secure=true"),l.cookie=e+"="+t+o+"; path=/"+n+a},remove:function(e,t){y.cookie.set(e,"",-1,t)},encode:function(e){return e=y.cookie._encoder.encode(e),e=e.replace(/=/g,""),e=encodeURIComponent(e),e.replace(/%/g,"-")},decode:function(e){return/^%7B%22.*%22%7D$/.test(e)?decodeURIComponent(e):(e=e.replace(/-/g,"%"),e=decodeURIComponent(e),e=y.cookie._encoder.decode(e))},_encoder:function(){function e(e){var t,r,n,o,a,c;for(n=e.length,r=0,t="";r<n;){if(o=255&e.charCodeAt(r++),r==n){t+=i.charAt(o>>2),t+=i.charAt((3&o)<<4),t+="==";break}if(a=e.charCodeAt(r++),r==n){t+=i.charAt(o>>2),t+=i.charAt((3&o)<<4|(240&a)>>4),t+=i.charAt((15&a)<<2),t+="=";break}c=e.charCodeAt(r++),t+=i.charAt(o>>2),t+=i.charAt((3&o)<<4|(240&a)>>4),t+=i.charAt((15&a)<<2|(192&c)>>6),t+=i.charAt(63&c)}return t}function t(e){var t,i,n,o,a,c,s;for(c=e.length,a=0,s="";a<c;){do{t=r[255&e.charCodeAt(a++)]}while(a<c&&-1==t);if(-1==t)break;do{i=r[255&e.charCodeAt(a++)]}while(a<c&&-1==i);if(-1==i)break;s+=String.fromCharCode(t<<2|(48&i)>>4);do{if(61==(n=255&e.charCodeAt(a++)))return s;n=r[n]}while(a<c&&-1==n);if(-1==n)break;s+=String.fromCharCode((15&i)<<4|(60&n)>>2);do{if(61==(o=255&e.charCodeAt(a++)))return s;o=r[o]}while(a<c&&-1==o);if(-1==o)break;s+=String.fromCharCode((3&n)<<6|o)}return s}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);return{encode:e,decode:t}}()},y.register_event=function(){function e(e,i,r){return function(n){var o=n;n=n||t(window.event);var a,c;void 0!==n&&(c=i.call(e,n)),y.isFunction(r)&&(a=r(o));var s=!0;return!1!==a&&!1!==c||(s=!1),s}}function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}var i=function(t,i,r,n){if(!t)return void C.error("No valid element provided to register_event");if(t.addEventListener&&!n)t.addEventListener(i,r,!1);else{var o="on"+i,a=t[o];t[o]=e(t,r,a)}};return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},i}(),y.dom_query=function(){function e(e){return e.all?e.all:e.getElementsByTagName("*")}function t(e,t){var i=" "+t+" ";return(" "+e.className+" ").replace(r," ").indexOf(i)>=0}function i(i){if(!l.getElementsByTagName)return new Array;for(var r,n=i.split(" "),o=new Array(l),a=0;a<n.length;a++)if(r=n[a].replace(/^\s+/,"").replace(/\s+$/,""),r.indexOf("#")>-1){var c=r.split("#"),s=c[0],u=c[1],d=l.getElementById(u);if(!d||s&&d.nodeName.toLowerCase()!=s)return new Array;o=new Array(d)}else if(r.indexOf(".")>-1){var c=r.split("."),s=c[0],p=c[1];s||(s="*");for(var g=new Array,f=0,m=0;m<o.length;m++){var _;_="*"==s?e(o[m]):o[m].getElementsByTagName(s);for(var h=0;h<_.length;h++)g[f++]=_[h]}o=new Array;for(var v=0,k=0;k<g.length;k++)g[k].className&&y.isString(g[k].className)&&t(g[k],p)&&(o[v++]=g[k])}else if(r.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var s=RegExp.$1,b=RegExp.$2,w=RegExp.$3,x=RegExp.$4;s||(s="*");for(var g=new Array,f=0,m=0;m<o.length;m++){var _;_="*"==s?e(o[m]):o[m].getElementsByTagName(s);for(var h=0;h<_.length;h++)g[f++]=_[h]}o=new Array;var O,v=0;switch(w){case"=":O=function(e){return e.getAttribute(b)==x};break;case"~":O=function(e){return e.getAttribute(b).match(new RegExp("\\b"+x+"\\b"))};break;case"|":O=function(e){return e.getAttribute(b).match(new RegExp("^"+x+"-?"))};break;case"^":O=function(e){return 0==e.getAttribute(b).indexOf(x)};break;case"$":O=function(e){return e.getAttribute(b).lastIndexOf(x)==e.getAttribute(b).length-x.length};break;case"*":O=function(e){return e.getAttribute(b).indexOf(x)>-1};break;default:O=function(e){return e.getAttribute(b)}}o=new Array,v=0;for(var k=0;k<g.length;k++)O(g[k])&&(o[v++]=g[k])}else{s=r;for(var g=new Array,f=0,m=0;m<o.length;m++)for(var _=o[m].getElementsByTagName(s),h=0;h<_.length;h++)g[f++]=_[h];o=g}return o}var r=/[\t\r\n]/g;return i}(),y.info={campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),t="",i={};return y.each(e,function(e){t=y.getQueryParam(l.URL,e),t.length&&(i[e]=t)}),i},searchEngine:function(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(e){var t=y.info.searchEngine(e),i="yahoo"!=t?"q":"p",r={};if(null!==t){r.g_search_engine=t;var n=y.getQueryParam(e,i);n.length&&(r.mp_keyword=n)}return r},browser:function(){var e=d,t=u.vendor||"";return window.opera?y.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":y.includes(e,"Edg")?"Edge":/(Chrome|CriOS)/i.test(e)?"Chrome":y.includes(t,"Apple")?y.includes(e,"Mobile")?"Mobile Safari":"Safari":y.includes(e,"Firefox")?"Firefox":y.includes(e,"Android")?"Android Mobile":y.includes(e,"Konqueror")?"Konqueror":y.includes(e,"MSIE")?"Internet Explorer":y.includes(e,"Gecko")?"Mozilla":"Other"},os:function(){var e=d;return/Windows/i.test(e)?/Phone/.test(e)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":"Other"},device:function(){var e=d;return!/iPhone/.test(e)||/iPod/.test(e)||/iPad/.test(e)?/iPad/.test(e)&&!/iPod/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/(Windows Phone|Windows Mobile)/i.test(e)?"Windows Phone":/Android/.test(e)?"Android":"Other":"iPhone"},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},properties:function(){return y.strip_empty_properties({os:y.info.os(),browser:y.info.browser(),device:y.info.device(),mp_lib:"web"})},people_properties:function(){return y.strip_empty_properties({$os:y.info.os(),$browser:y.info.browser()})},pageviewInfo:function(e){return y.strip_empty_properties({mp_page:e,mp_referrer:l.referrer,mp_browser:y.info.browser(),mp_platform:y.info.os()})}};var C={log:function(){if((v||triggermail.util.cookie.get("_bc_platform_debug"))&&!y.isUndefined(s)&&s)try{s.log.apply(s,arguments)}catch(e){y.each(arguments,function(e){s.log(e)})}},error:function(){if((v||triggermail.util.cookie.get("_bc_platform_debug"))&&!y.isUndefined(s)&&s){var e=["Bluecore error:"].concat(y.toArray(arguments));try{s.error.apply(s,e)}catch(t){y.each(e,function(e){s.error(e)})}}},critical:function(){if(!y.isUndefined(s)&&s){var e=["Bluecore error:"].concat(y.toArray(arguments));try{s.error.apply(s,e)}catch(t){y.each(e,function(e){s.error(e)})}}}},A=function(){};A.prototype.create_properties=function(){},A.prototype.event_handler=function(){},A.prototype.after_track_handler=function(){},A.prototype.init=function(e){return this.mp=e,this},A.prototype.track=function(e,t,i,r){var n=this,o=y.dom_query(e);return 0==o.length?void C.error("The DOM query ("+e+") returned 0 elements"):(y.each(o,function(e){y.register_event(e,this.override_event,function(e){var o={},a=n.create_properties(i,this),c=n.mp.get_config("track_links_timeout");n.event_handler(e,this,o),window.setTimeout(n.track_callback(r,a,o,!0),c),n.mp.track(t,a,n.track_callback(r,a,o))})},this),!0)},A.prototype.track_callback=function(e,t,i,r){r=r||!1;var n=this;return function(){i.callback_fired||(i.callback_fired=!0,e&&!1===e(r,t)||n.after_track_handler(t,i,r))}},A.prototype.create_properties=function(e,t){return"function"==typeof e?e(t):y.extend({},e)};var P=function(){this.override_event="click"};y.inherit(P,A),P.prototype.create_properties=function(e,t){var i=P.superclass.create_properties.apply(this,arguments);return t.href&&(i.url=t.href),i},P.prototype.event_handler=function(e,t,i){i.new_tab=2===e.which||e.metaKey||"_blank"===t.target,i.href=t.href,i.new_tab||e.preventDefault()},P.prototype.after_track_handler=function(e,t,i){t.new_tab||setTimeout(function(){window.location=t.href},0)};var T=function(){this.override_event="submit"};y.inherit(T,A),T.prototype.event_handler=function(e,t,i){i.element=t,e.preventDefault()},T.prototype.after_track_handler=function(e,t,i){setTimeout(function(){t.element.submit()},0)};var L=function(e){this.props={},this.campaign_params_saved=!1,e.cookie_name?this.name="mp_"+e.cookie_name:this.name="mp_"+e.token+"_mixpanel",this.load(),this.update_config(e),this.upgrade(e),this.save()};L.prototype.properties=function(){var e={};return y.each(this.props,function(t,i){y.include(p,i)||(e[i]=t)}),e},L.prototype.load=function(){if(!this.disabled){var e=y.cookie.parse(this.name);e&&(this.props=y.extend({},e))}},L.prototype.upgrade=function(e){var t,i,r=e.upgrade;r&&(t="mp_super_properties","string"==typeof r&&(t=r),i=y.cookie.parse(t),y.cookie.remove(t),y.cookie.remove(t,!0),i&&(this.props=y.extend(this.props,i.all,i.events))),e.cookie_name||"mixpanel"===e.name||(t="mp_"+e.token+"_"+e.name,(i=y.cookie.parse(t))&&(y.cookie.remove(t),y.cookie.remove(t,!0),this.register_once(i)))},L.prototype.save=function(){this.disabled||y.cookie.set(this.name,y.JSONEncode(this.props),this.expire_days,this.cross_subdomain)},L.prototype.remove=function(){y.cookie.remove(this.name,!1),y.cookie.remove(this.name,!0)},L.prototype.clear=function(){this.remove(),this.props={}},L.prototype.register_once=function(e,t,i){return!!y.isObject(e)&&(void 0===t&&(t="None"),this.expire_days=void 0===i?this.default_expiry:i,y.each(e,function(e,i){this.props[i]&&this.props[i]!==t||(this.props[i]=e)},this),this.save(),!0)},L.prototype.register=function(e,t){return!!y.isObject(e)&&(this.expire_days=void 0===t?this.default_expiry:t,y.extend(this.props,e),this.save(),!0)},L.prototype.unregister=function(e){e in this.props&&(delete this.props[e],this.save())},L.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(y.info.campaignParams()),this.campaign_params_saved=!0)},L.prototype.update_search_keyword=function(e){this.register(y.info.searchInfo(e))},L.prototype.update_referrer_info=function(e){this.register_once({$initial_referrer:e||"$direct",$initial_referring_domain:y.info.referringDomain(e)||"$direct"},"")},L.prototype.get_referrer_info=function(){return y.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},L.prototype.safe_merge=function(e){return y.each(this.props,function(t,i){i in e||(e[i]=t)}),e},L.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_cookie),this.set_cross_subdomain(e.cross_subdomain_cookie)},L.prototype.set_disabled=function(e){this.disabled=e,this.disabled&&this.remove()},L.prototype.set_cross_subdomain=function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())},L.prototype.get_cross_subdomain=function(){return this.cross_subdomain},L.prototype._add_to_people_queue=function(e,t){var i=this._get_queue_key(e),r=t[e],n=this._get_or_create_queue("$set"),o=this._get_or_create_queue("$add"),a=this._get_or_create_queue("$append",[]);"__mps"===i?(y.extend(n,r),this._pop_from_people_queue("$add",r)):"__mpa"===i?y.each(r,function(e,t){t in n?n[t]+=e:(t in o||(o[t]=0),o[t]+=e)},this):"__mpap"===i&&a.push(r),C.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),C.log(t),this.save()},L.prototype._pop_from_people_queue=function(e,t){var i=this._get_queue(e);y.isUndefined(i)||(y.each(t,function(e,t){delete i[t]},this),this.save())},L.prototype._get_queue_key=function(e){return"$set"===e?"__mps":"$add"===e?"__mpa":"$append"===e?"__mpap":void C.error("Invalid queue:",e)},L.prototype._get_queue=function(e){return this.props[this._get_queue_key(e)]},L.prototype._get_or_create_queue=function(e,t){var i=this._get_queue_key(e),t=y.isUndefined(t)?{}:t;return this.props[i]||(this.props[i]=t)};var j=function(t,i,r){var n,o="triggermail.lytics"===r?e:e[r];return o&&!y.isArray(o)?void C.error("You have already initialized "+r):(n=new I,n._init(t,i,r),n.people=new U,n.people._init(n),v=v||n.get_config("debug"),y.isUndefined(o)||(n._execute_array.call(n.people,o.people),n._execute_array(o)),n)},I=function(){};I.prototype.init=function(t,i,r){if(void 0===r)return void C.error("You must name your new library: init(token, config, name)");if("triggermail.lytics"===r)return void C.error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");var n=j(t,i,r);return e[r]=n,n._loaded(),n},I.prototype._init=function(e,t,i){this.__loaded=!0,this.config={},this.set_config(y.extend({},k,t,{name:i,token:e,callback_fn:("triggermail.lytics"===i?i:"triggermail.lytics."+i)+"._jsc"})),this._jsc=function(){},this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.cookie=new L(this.config),this.register_once({distinct_id:y.UUID()},"")},I.prototype._loaded=function(){this.get_config("loaded")(this),this.get_config("track_pageview")&&this.track_pageview()},I.prototype._dom_loaded=function(){y.each(this.__dom_loaded_queue,function(e){this._track_dom.apply(this,e)},this),y.each(this.__request_queue,function(e){this._send_request.apply(this,e)},this),delete this.__dom_loaded_queue,delete this.__request_queue},I.prototype._track_dom=function(e,t){if(this.get_config("img"))return C.error("You can't use DOM tracking functions with img = true."),!1;if(!b)return this.__dom_loaded_queue.push([e,t]),!1;var i=(new e).init(this);return i.track.apply(i,t)},I.prototype._prepare_callback=function(e,t){if(y.isUndefined(e))return null;if(_){return function(i){e(i,t)}}var i=this._jsc,r=""+Math.floor(1e8*Math.random()),n=this.get_config("callback_fn")+'["'+r+'"]';return i[r]=function(n){delete i[r],e(n,t)},n},I.prototype._send_request=function(e,t,i){if(h)return void this.__request_queue.push(arguments);var r=this.get_config("verbose");if(this.get_config("test")&&(t.test=1),r&&(t.verbose=1),this.get_config("img")&&(t.img=1),i&&!_&&(t.callback=i),t.ip=this.get_config("ip")?1:0,t._=(new Date).getTime().toString(),"img"in t){var n=l.createElement("img");n.src=e,l.body.appendChild(n)}else if(_){var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.withCredentials=!0,o.onreadystatechange=function(e){if(4===o.readyState)if(200===o.status||202===o.status)i&&i(r?y.JSONDecode(o.responseText):Number(o.responseText));else{var t="Bad HTTP status: "+o.status+" "+o.statusText;C.error(t),i&&i(r?{status:0,error:t}:0)}},o.send(y.HTTPBuildQuery(t))}else{e+="?"+y.HTTPBuildQuery(t);var a=l.createElement("script");a.type="text/javascript",a.async=!0,a.defer=!0,a.src=e;var c=l.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)}},I.prototype._execute_array=function(e){var t,i=[],r=[],n=[];y.each(e,function(e){e&&(t=e[0],"function"==typeof e?e.call(this):y.isArray(e)&&"alias"===t?i.push(e):y.isArray(e)&&-1!=t.indexOf("track")&&"function"==typeof this[t]?n.push(e):r.push(e))},this);var o=function(e,t){y.each(e,function(e){this[e[0]].apply(this,e.slice(1))},t)};o(i,this),o(r,this),o(n,this)},I.prototype.push=function(e){this._execute_array([e])},I.prototype.disable=function(e){void 0===e?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(e)},I.prototype.track=function(e,t,i,r){if(void 0===e)return void C.error("No event name provided to mixpanel.track");t=t||{},t.token=t.token||this.get_config("token"),triggermail.config.eventSource&&!t.event_source&&(t.event_source=triggermail.config.eventSource),this.cookie.update_search_keyword(l.referrer),this.get_config("store_google")&&this.cookie.update_campaign_params(),this.get_config("save_referrer")&&this.cookie.update_referrer_info(l.referrer),t=y.extend({},y.info.properties(),this.cookie.properties(),t),t.distinct_id=r||t.distinct_id;for(var n=["ch","bc_persist_updated","bc_last_opaque_id"],o=0;o<n.length;o++)delete t[n[o]];(triggermail.util.strip_props_before_send||function(e){return e})(t);var a={event:e,properties:t};v&&(a.validate=1);var c=y.truncate(a,1023),s=y.JSONEncode(c),u=y.base64Encode(s);C.log("BLUECORE REQUEST:"),C.log(c);var d=u;return payload={data:d},-1!=this.get_distinct_id().indexOf("live_demo")?(payload.live_demo=!0,track_path=this.get_config("api_host")+"/templates/demo_track/"+e):-1!=this.get_distinct_id().indexOf("event_stream")?(payload.event_stream=!0,track_path=this.get_config("api_host")+"/templates/event_stream_track/"+e):track_path=this.get_config("api_host")+"/track/"+e,this._send_request(track_path,payload,this._prepare_callback(i,c)),c},I.prototype.track_pageview=function(e){void 0===e&&(e=l.location.href),this.track("mp_page_view",y.info.pageviewInfo(e))},I.prototype.track_links=function(){return this._track_dom.call(this,P,arguments)},I.prototype.track_forms=function(){return this._track_dom.call(this,T,arguments)},I.prototype.register=function(e,t){this.cookie.register(e,t)},I.prototype.register_once=function(e,t,i){this.cookie.register_once(e,t,i)},I.prototype.unregister=function(e){this.cookie.unregister(e)},I.prototype._register_single=function(e,t){var i={};i[e]=t,this.register(i)},I.prototype.identify=function(e,t,i,r){e!=this.get_distinct_id()&&e!=this.get_property("__alias")&&(this.unregister("__alias"),this._register_single("distinct_id",e)),this._flags.identify_called=!0,this.people._flush(t,i,r)},I.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},I.prototype.alias=function(e,t){if(e===this.get_property("$people_distinct_id"))return C.critical("Attempting to create alias for existing People user - aborting."),-2;var i=this;return y.isUndefined(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single("__alias",e),this.track("$create_alias",{alias:e,distinct_id:t},function(t){i.identify(e)})):(C.error("alias matches current distinct_id - skipping api call."),this.identify(e),-1)},I.prototype.name_tag=function(e){this._register_single("mp_name_tag",e)},I.prototype.set_config=function(e){y.isObject(e)&&(y.extend(this.config,e),this.cookie&&this.cookie.update_config(this.config),v=v||this.get_config("debug"))},I.prototype.get_config=function(e){return this.config[e]},I.prototype.get_property=function(e){return this.cookie.props[e]},I.prototype.toString=function(){var e=this.get_config("name");return"triggermail.lytics"!==e&&(e="triggermail.lytics."+e),e};var U=function(){};if(U.prototype._init=function(e){this._mixpanel=e},U.prototype.set=function(e,t,i){var r={},n={};return y.isObject(e)?(y.each(e,function(e,t){"$distinct_id"!=t&&"$token"!=t&&(n[t]=e)}),i=t):n[e]=t,this._get_config("save_referrer")&&this._mixpanel.cookie.update_referrer_info(l.referrer),n=y.extend({},y.info.people_properties(),this._mixpanel.cookie.get_referrer_info(),n),r.$set=n,this._send_request(r,i)},U.prototype.increment=function(e,t,i){var r={},n={};return y.isObject(e)?(y.each(e,function(e,t){if("$distinct_id"!=t&&"$token"!=t)return isNaN(parseFloat(e))?void C.error("Invalid increment value passed to mixpanel.people.increment - must be a number"):void(n[t]=e)}),i=t):(y.isUndefined(t)&&(t=1),n[e]=t),r.$add=n,this._send_request(r,i)},U.prototype.append=function(e,t,i){var r={},n={};return y.isObject(e)?(y.each(e,function(e,t){"$distinct_id"!=t&&"$token"!=t&&(n[t]=e)}),i=t):n[e]=t,r.$append=n,this._send_request(r,i)},U.prototype.track_charge=function(e,t,i){return!y.isNumber(e)&&(e=parseFloat(e),isNaN(e))?void C.error("Invalid value passed to mixpanel.people.track_charge - must be a number"):this.append("$transactions",y.extend({$amount:e},t),i)},U.prototype.clear_charges=function(e){return this.set("$transactions",[],e)},U.prototype.delete_user=function(){if(!this._identify_called())return void C.error("mixpanel.people.delete_user() requires you to call identify() first");var e={$delete:this._mixpanel.get_distinct_id()};return this._send_request(e)},U.prototype.toString=function(){return this._mixpanel.toString()+".people"},U.prototype._send_request=function(e,t){e.$token=this._get_config("token"),e.$distinct_id=this._mixpanel.get_distinct_id();var i=y.encodeDates(e),r=y.truncate(i,255),n=y.JSONEncode(i),o=y.base64Encode(n);return this._identify_called()?(C.log("BLUECORE PEOPLE REQUEST:"),C.log(r),this._mixpanel._send_request(this._get_config("api_host")+"/engage/",{data:o},this._mixpanel._prepare_callback(t,r)),r):(this._enqueue(e),y.isUndefined(t)||t(this._get_config("verbose")?{status:-1,error:null}:-1),r)},U.prototype._get_config=function(e){return this._mixpanel.get_config(e)},U.prototype._identify_called=function(){return!0===this._mixpanel._flags.identify_called},U.prototype._enqueue=function(e){
"$set"in e?this._mixpanel.cookie._add_to_people_queue("$set",e):"$add"in e?this._mixpanel.cookie._add_to_people_queue("$add",e):"$append"in e?this._mixpanel.cookie._add_to_people_queue("$append",e):C.error("Invalid call to _enqueue():",e)},U.prototype._flush=function(e,t,i){var r=this,n=y.extend({},this._mixpanel.cookie._get_queue("$set")),o=y.extend({},this._mixpanel.cookie._get_queue("$add")),a=this._mixpanel.cookie._get_queue("$append");if(y.isUndefined(n)||!y.isObject(n)||y.isEmptyObject(n)||(r._mixpanel.cookie._pop_from_people_queue("$set",n),this.set(n,function(t,i){0==t&&r._mixpanel.cookie._add_to_people_queue("$set",n),y.isUndefined(e)||e(t,i)})),y.isUndefined(o)||!y.isObject(o)||y.isEmptyObject(o)||(r._mixpanel.cookie._pop_from_people_queue("$add",o),this.increment(o,function(e,i){0==e&&r._mixpanel.cookie._add_to_people_queue("$add",o),y.isUndefined(t)||t(e,i)})),!y.isUndefined(a)&&y.isArray(a)&&a.length)for(var c=a.length-1;c>=0;c--){var s=a.pop();r.append(s,function(e,t){0==e&&r._mixpanel.cookie._add_to_people_queue("$append",s),y.isUndefined(i)||i(e,t)})}},y.toArray=y.toArray,y.isObject=y.isObject,y.JSONEncode=y.JSONEncode,y.JSONDecode=y.JSONDecode,y.isEmptyObject=y.isEmptyObject,I.prototype.init=I.prototype.init,I.prototype.disable=I.prototype.disable,I.prototype.track=I.prototype.track,I.prototype.track_links=I.prototype.track_links,I.prototype.track_forms=I.prototype.track_forms,I.prototype.track_pageview=I.prototype.track_pageview,I.prototype.register=I.prototype.register,I.prototype.register_once=I.prototype.register_once,I.prototype.unregister=I.prototype.unregister,I.prototype.identify=I.prototype.identify,I.prototype.alias=I.prototype.alias,I.prototype.name_tag=I.prototype.name_tag,I.prototype.set_config=I.prototype.set_config,I.prototype.get_config=I.prototype.get_config,I.prototype.get_property=I.prototype.get_property,I.prototype.get_distinct_id=I.prototype.get_distinct_id,I.prototype.toString=I.prototype.toString,L.prototype.properties=L.prototype.properties,L.prototype.update_search_keyword=L.prototype.update_search_keyword,L.prototype.update_referrer_info=L.prototype.update_referrer_info,L.prototype.get_cross_subdomain=L.prototype.get_cross_subdomain,L.prototype.clear=L.prototype.clear,U.prototype.set=U.prototype.set,U.prototype.increment=U.prototype.increment,U.prototype.append=U.prototype.append,U.prototype.track_charge=U.prototype.track_charge,U.prototype.clear_charges=U.prototype.clear_charges,U.prototype.delete_user=U.prototype.delete_user,U.prototype.toString=U.prototype.toString,y.isUndefined(e))return void C.critical("'mixpanel' object not initialized. Ensure you are using the latest version of the Mixpanel JS Library along with the snippet we provide.");if(e.__loaded||e.config&&e.cookie)return void C.error("Mixpanel library has already been downloaded at least once.");if(m<1.1)return void C.critical("Version mismatch; please ensure you're using the latest version of the Mixpanel code snippet.");var D={};y.each(e._i,function(e){var t,i;e&&y.isArray(e)&&(t=e[e.length-1],i=j.apply(this,e),D[t]=i)});var M=function(){y.each(D,function(t,i){"triggermail.lytics"!==i&&(e[i]=t)}),e._=y};if(e.init=function(t,i,r){if(r)e[r]||(e[r]=D[r]=j(t,i,r),e[r]._loaded());else{var n=e;D["triggermail.lytics"]?n=D["triggermail.lytics"]:t&&(n=j(t,i,"triggermail.lytics")),window["triggermail.lytics"]=e=n,M()}},e.init(),y.each(D,function(e){e._loaded()}),l.addEventListener)"complete"==l.readyState?t():l.addEventListener("DOMContentLoaded",t,!1);else if(l.attachEvent){l.attachEvent("onreadystatechange",t);var R=!1;try{R=null==window.frameElement}catch(e){}l.documentElement.doScroll&&R&&i()}y.register_event(window,"load",t,!0)}(window.triggermail.lytics),function(){function e(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}e(triggermail,function(){var t=["unsubscribe","optin"],i=["email","phone_number","linked_identifiers"],r=function(e,t){var i=e.phone_number;if(!i)return!1;var r=triggermail.util.hashCode(i);return r!==triggermail.persist.read_prop("bc_pn")?(triggermail.persist.write_prop("bc_pn",r),!0):void 0},n=function(e,t){var i=e.email,r=e.coom,n=e.obem;if(!(void 0!==i&&""!==i||r||n))return!1;if(!0!==t&&!(i=triggermail.core.sanitizer.sanitize("email",i)))return!1;var o=triggermail.util.hashCode(i||r||n);return o!==triggermail.persist.read_prop("bc_id")?(triggermail.persist.write_prop("bc_id",o),!0):void 0},o=function(e,t){var o=!1;if(o=o||r(e),o=o||n(e,t)){for(var a={},c=e,s=0;s<i.length;s++){var u=i[s];c[u]&&(a[u]=c[u],delete c[u])}return a.customer=c,triggermail.track("identify",a),a}},a=function(t){var i=localStorage.getItem("siteAnalyticsData");if(i)try{var i=JSON.parse(i),r={original_user_type:i.original_user_type||"new",current_user_type:i.current_user_type||"new",session_pvc:i.session_pvc.toString()||"1",day_pvc:i.day_pvc.toString()||"1",session_id:i.session_id.toString()||"",bc_source_detail:i.session_source||"direct",bc_source_medium:i.session_medium||"direct"};e(t,r)}catch(e){return t}return t};return{EMAIL_ADDRESS_PROPERTY:"email_address",PAGE_VIEW:"page_view",MAX_PROPERTY_LENGTH:1024,track:function(e,i,r){var n=triggermail.lytics._.extend({},i);if(-1!==t.indexOf(e))if(n.email);else{if(!n.coom&&!n.obem)return;n={customer:n}}else{var o=triggermail.persist.props();triggermail.lytics._.extend(n,o)}try{n.url=window.location.href.slice(0,899)}catch(e){}try{n.integration_version=window.triggermail.__tm_iver||0}catch(e){}triggermail.lytics.track(e,a(n),void 0,r),triggermail.lytics.get_distinct_id()&&(n.distinct_id=triggermail.lytics.get_distinct_id());try{!0===triggermail.integ.debug&&console.debug(e,n)}catch(e){}},add_to_cart:function(e){return this.track("add_to_cart",{products:[e]})},remove_from_cart:function(e){return this.track("remove_from_cart",{products:[e]})},wishlist:function(e){return this.track("wishlist",{products:[e]})},view_cart:function(e){return this.track("viewed_cart",e)},stop:function(e){return this.track("stop",e)},page:function(e){return this.track("page_view",e)},purchase:function(e){var t=triggermail.lytics._.extend({},e);return triggermail.util.isValidEmail(t.email)||(t.distinct_id=triggermail.lytics.get_distinct_id(),delete t.email),this.track("purchase",t)},checkout_start:function(e){return this.track("checkout_start",e)},view:function(e,t){triggermail.integ.salt_products&&(e.salt=Math.random().toString(36).replace(".",""));var i=triggermail.lytics._.extend(t||{},{products:[e]});return this.track("viewed_product",i)},view_content:function(e,t){triggermail.integ.salt_products&&(e.salt=Math.random().toString(36).replace(".",""));var i=triggermail.lytics._.extend(t||{},{contents:[e]});return this.track("viewed_content",i)},search:function(e){return this.track("search",e)},browse_category:function(e){return this.track("browse_category",{browse_properties:e})},identify:function(e,t){var i=e.source,r=(e.source_detail||"").trim()||"no_detail";return triggermail.lytics._.values(triggermail.identifySource).indexOf(i)<0&&(i=triggermail.identifySource.CUSTOM),e.source=i,e.source_detail=r,o(e,t)},subscribe:function(e){return e.source="newsletter",o(e)},unsubscribe:function(e){return this.anonymous_track("unsubscribe",e)},optin:function(e){return this.anonymous_track("optin",e)},customer_patch:function(e){return this.track("customer_patch",{customer:e})},patch:function(e){return this.track("patch",e)},merge:function(e){return this.track("merge",e)},custom:function(e,t){return this.track(e,t)},init:function(e){},exception:function(e){var t={};triggermail.lytics._.extend(t,triggermail.lytics._.info.properties());try{t.url=window.location.href,t.url.indexOf("s.thebrighttag")>-1&&delete t.url,t.message=e.message}catch(e){}t.error=e,this.track("exception",t)},anonymous_track:function(e,t,i){var r=i||triggermail.lytics._.UUID();return this.track(e,t,r),r}}}())}(),triggermail.identifySource=function(){return{ACCOUNT_REGISTER:"account register",ACCOUNT_LOGIN:"account login",EMAIL_CAPTURE_POPUP:"email capture popup",EMAIL_SIGNUP:"email signup",SITE_VARIABLE:"site variable",CHECKOUT_FLOW:"checkout flow",CUSTOM:"custom",ESP_EMAIL_APPEND:"esp email append",OBEM_EMAIL_APPEND:"obem email append",JUSTUNO:"justuno",BLUECORE_PURCHASE_PIXEL:"bluecore purchase pixel",BLUECORE_SITE:"bluecore_site"}}(),triggermail.util=function(){return{price:function(e){var t=String(e).replace(/[^0-9\.]/g,"").split("."),i=t[0],r=(t[1]||"").slice(0,2),n=i+"."+r;return parseFloat(n)},unique:function(e){for(var t={},i=0;i<e.length;i++)t[e[i]]=!0;return triggermail.lytics._.map(t,function(e,t){return t})},slugify:function(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},serializeForm:function(e){var t={},i=e.serializeArray();return $.each(i,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},getUrlParam:function(e){var t=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),i="[\\?&]"+t+"=([^&#]*)",r=new RegExp(i),n=r.exec(window.location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},isMobile:function(){var e=!1,t=["iphone","ipad","android","blackberry","nokia","opera mini","windows mobile","windows phone","iemobile"];for(var i in t)navigator.userAgent.toLowerCase().indexOf(t[i].toLowerCase())>0&&(e=!0);return e},getParamFromQueryString:function(e,t){return decodeURI((RegExp(t+"=(.+?)(&|$)").exec(e)||[,null])[1])},trimString:function(e,t){return triggermail.lytics._.trim(e).substring(0,t)},htmlToText:function(e){var t=document.createElement("p");return t.innerHTML=e,t.textContent||t.innerText||""},isAnonymousUser:function(){var e=triggermail.lytics.get_property(triggermail.core.EMAIL_ADDRESS_PROPERTY);return!this.isValidEmail(e)},emRegex:/\S+@\S+\.\S+/,isValidEmail:function(e){return triggermail.util.emRegex.test(e)},validateAndIdentify:function(e,t,i,r){var n=(e||"").trim();this.isValidEmail(n)&&(triggermail.identify({email:n,source:t,source_detail:i}),r&&triggermail.optin({email:n}))},findEmail:function(e,t){try{return void 0===t&&(t=triggermail.util.emRegex),t.exec(e).pop()}catch(e){}},hashCode:function(e){var t,i,r=0;if(0===e.length)return r;for(t=0;t<e.length;t++)i=e.charCodeAt(t),r=(r<<5)-r+i,r&=r;return r},productHash:function(e){var t=this.sanitizeProductName(e[TriggerMail.PRODUCT_NAME_PROPERTY]);return this.hashCode(t)},_getbyte64:function(e,t){_ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var i=_ALPHA.indexOf(e.charAt(t));if(-1===i)throw"Cannot decode base64";return i},b64decode:function(e){var t,i,r=0,n=e.length,o=[],a=String(e);if(0===n)return a;if(n%4!=0)throw"Cannot decode base64";for("="===a.charAt(n-1)&&(r=1,"="===a.charAt(n-2)&&(r=2),n-=4),t=0;t<n;t+=4)i=this._getbyte64(a,t)<<18|this._getbyte64(a,t+1)<<12|this._getbyte64(a,t+2)<<6|this._getbyte64(a,t+3),o.push(String.fromCharCode(i>>16,i>>8&255,255&i));switch(r){case 1:i=this._getbyte64(a,t)<<18|this._getbyte64(a,t+1)<<12|this._getbyte64(a,t+2)<<6,o.push(String.fromCharCode(i>>16,i>>8&255));break;case 2:i=this._getbyte64(a,t)<<18|this._getbyte64(a,t+1)<<12,o.push(String.fromCharCode(i>>16))}return o.join("")},wrapEvent:function(e){var t=Array.prototype.slice.call(arguments,1);return function(){try{return e.apply(this,t.concat(Array.prototype.slice.call(arguments,0)))}catch(e){triggermail.exception(e)}}},removeURLParam:function(e,t){return triggermail.util.updateURLParams(e,t,!1)},keepURLParam:function(e,t){return triggermail.util.updateURLParams(e,t,!0)},updateURLParams:function(e,t,i){var r,n=e.split("?")[0],o=[],a=-1!==e.indexOf("?")?e.split("?")[1]:"";if(""!==a){o=a.split("&");for(var c=o.length-1;c>=0;c-=1)r=o[c].split("=")[0],i?triggermail.lytics._.isArray(t)?-1===t.indexOf(r)&&o.splice(c,1):r!==t&&o.splice(c,1):triggermail.lytics._.isArray(t)?t.indexOf(r)>-1&&o.splice(c,1):r===t&&o.splice(c,1);n+=o.length>0?"?"+o.join("&"):""}return n},getArrayElementFromQueryString:function(e,t){var i=[];e||(e=location.href),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");for(var r=t+"=([^&#]+)",n=new RegExp(r,"ig");;){var o=n.exec(e);if(!o||!o[1])break;i.push(o[1])}return i.length?1===i.length?i[0]:i:null},executeOnLoad:function(e,t,i,r,n,o){var a=void 0===i?3:i,c=r||500,s=n||!1,u=o||function(){},l=function(e,t){try{var i=t.shift();if(void 0!==e[i]&&e[i])return t.length>0?l(e[i],t):e[i]}catch(e){}return null};if(s&&triggermail.lytics._.dom_query(e).length>0||l(window,e.split(".")))try{t()}catch(e){}else if(a>0)try{a-=1,setTimeout(function(){triggermail.util.wrapEvent(function(){triggermail.util.executeOnLoad(e,t,a,r,s)},e,t,a,c,s)()},c)}catch(e){}else try{u()}catch(e){}},sanitizeSearchTerm:function(e){return e.replace(/[^a-z\d\s:]+/gi,"")},registerAndMergeOpaqueId:function(e){var t=triggermail.persist.read_prop("distinct_id");if(void 0!==e&&e&&e!==t){var i=triggermail.util.hashCode(e||""),r=triggermail.persist.read_prop("bc_last_opaque_id");if(r&&i&&i===r)return;triggermail.track("merge",{merge:{source:t,destination:e}}),triggermail.persist.write_prop("bc_last_opaque_id",i)}},cookie:triggermail.lytics._.cookie,encode:triggermail.lytics._.JSONEncode,decode:triggermail.lytics._.JSONDecode,walk:function(e,t){var i=e;for(t(i),i=i.firstChild;i;)walk(e,t),i=i.nextSibling},walkUntil:function(e,t,i){var r=e;if(ret=t(r),!0===i(ret))return ret;for(r=r.firstChild;r;)walk(r,t),r=r.nextSibling}}}(),triggermail.demo=function(){var e=triggermail.lytics.get_distinct_id();-1===e.indexOf("live_demo")&&(triggermail.persist.write_prop("distinct_id","live_demo_"+e),e=triggermail.lytics.get_distinct_id()),triggermail.lytics.cookie.update_config({live_demo:!0,cookie_expiration:1});var t=triggermail.Partner.keys.lytics.p,i="http://www.bluecore.com/api/templates/live_demo/"+t+"/"+e;window.open(i)},triggermail.event_stream=function(){var e=triggermail.lytics.get_distinct_id();if(-1===e.indexOf("event_stream")){var t="event_stream_"+triggermail.persist.read_prop("distinct_id");triggermail.persist.write_prop("distinct_id",t),e=t}triggermail.lytics.cookie.update_config({event_stream:!0,cookie_expiration:1});var i=triggermail.Partner.keys.lytics.p,r="http://www.bluecore.com/api/templates/event_stream/"+i+"/"+e;window.open(r)},triggermail.insanetiego=function(){return{inject_div:function(){$("body").append('<div id="insanetiego" style="position:fixed;bottom:0;width:100%;background:#D8E7ED;height:300px;overflow:scroll;z-index:2000;border-top-style:solid;border-top-width:5px;"></div>')},remove_div:function(){$("#insanetiego").remove()},debug:function(){triggermail.util.cookie.set("tm_debug",!0),triggermail.integ.debug=!0,this.inject_div()},undebug:function(){triggermail.util.cookie.set("tm_debug",!1),triggermail.integ.debug=!1}}}(),triggermail.core={},triggermail.core.sanitizer=function(){function e(e){return t(e)?e:null}function t(e){return/\S+@\S+\.\S+/.test(e)}return{sanitize:function(t,i){return"email"===t?e(i):"string"==typeof i?i.trim():i||""}}}(),triggermail.persist=function(){var e="LOCAL_STORAGE",t=function(e){return"COOKIE_ONLY"===e||"LOCAL_STORAGE"===e},i=function(){return triggermail.lytics.cookie.props||{}},r=function(){try{return JSON.parse(localStorage.getItem("bc_persist_props"))||{}}catch(e){return{}}},n=function(e){try{var t=e.email,i=e.obem,r=triggermail.lytics._.extend({},e);if(t)return delete r.email,r.bc_id=triggermail.util.hashCode(t),r;if(i)return delete r.obem,r}catch(e){}return e},o=function(){var e=Date.now();s("bc_persist_updated",e);var t=i();t=n(t),localStorage.setItem("bc_persist_props",JSON.stringify(t))},a=function(e,t){var i=e.distinct_id;try{t.distinct_id&&t.distinct_id!==i&&triggermail.track("merge",{merge:{source:t.distinct_id,destination:i}}),t.email&&triggermail.util.isValidEmail(t.email)&&triggermail.track("merge",{merge:{source:t.email,destination:i}})}catch(e){}},c=function(e,t,i){var r={},o=Date.now(),a=i?e:t,c=i?t:e;r=triggermail.lytics._.extend(r,a),r=triggermail.lytics._.extend(r,c),r=n(r),r.bc_persist_updated=o,r.distinct_id=e.distinct_id,triggermail.lytics.cookie.props=r,triggermail.lytics.cookie.save(),localStorage.setItem("bc_persist_props",JSON.stringify(r))},s=function(e,t){triggermail.lytics.cookie.props[e]=t,triggermail.lytics.cookie.save()},u=function(e,t){var i=JSON.parse(localStorage.getItem("bc_persist_props"));i[e]=t,i=n(i),i.bc_persist_updated=Date.now(),localStorage.setItem("bc_persist_props",JSON.stringify(i))},l=function(e){delete triggermail.lytics.cookie.props[e],triggermail.lytics.cookie.save()},d=function(e){var t=JSON.parse(localStorage.getItem("bc_persist_props"));delete t[e],t.bc_persist_updated=Date.now(),localStorage.setItem("bc_persist_props",JSON.stringify(t))},p=!0;return{setMode:function(i){t(i)&&(e=i)},setSendMergeEvents:function(e){"boolean"==typeof e&&(p=e)},sync:function(){if("COOKIE_ONLY"!==e){var t=i(),n=t.bc_persist_updated||0,s=r(),u=s.bc_persist_updated;if(!u||triggermail.lytics._.isEmptyObject(s))return void o();if(!function(e,t){return JSON.stringify(e,Object.keys(e).sort())===JSON.stringify(t,Object.keys(t).sort())}(t,s)){c(s,t,!n||n>u),!0===p&&a(s,t)}}},props:function(){return"COOKIE_ONLY"===e?i():r()},read_prop:function(t){var n;return n="COOKIE_ONLY"===e?i()[t]:r()[t],void 0!==n?n:null},write_prop:function(t,i){"COOKIE_ONLY"===e?s(t,i):(u(t,i),this.sync())},remove_prop:function(t){"COOKIE_ONLY"===e?l(t):(l(t),d(t))}}}(),triggermail.integ=function(){var e=/^(([^<>{}()\[\]\.,;:\s@\"]+(\.[^<>{}()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>{}()[\]\.,;:\s@\"]+\.)+[^<>{}()[\]\.,;:\s@\"]{2,})/,t=/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi,i=function(){var e=triggermail.util.getUrlParam("mc_eid");triggermail.persist.read_prop("distinct_id");e&&-1===e.toLowerCase().indexOf("uniqid")&&(e="mceid_"+e,triggermail.util.registerAndMergeOpaqueId(e),triggermail.persist.write_prop("mc_eid",e))},r=function(){for(var t=window.location.search.split("&"),i=0;i<t.length;i++){try{var r=triggermail.util.b64decode(decodeURIComponent(t[i].split("=").slice(1).join("=")))}catch(e){}if(r&&e.test(r)&&triggermail.util.isValidEmail(r))return void triggermail.identify({email:r,source:triggermail.identifySource.ESP_EMAIL_APPEND,source_detail:"encoded"})}var n=triggermail.util.getUrlParam("tme");if(n.length>0)return void triggermail.identify({email:n,source:triggermail.identifySource.ESP_EMAIL_APPEND,source_detail:"tme"},!0)},n=function(){var e=decodeURIComponent(location.search).match(t)||decodeURIComponent(location.hash).match(t);if(e&&triggermail.util.isValidEmail(e[0]))return void triggermail.identify({email:e[0],source:triggermail.identifySource.ESP_EMAIL_APPEND,source_detail:"plain text"})},o=function(){var e=triggermail.util.getUrlParam("obem");void 0!==e&&""!==e&&triggermail.identify({obem:e,source:triggermail.identifySource.OBEM_EMAIL_APPEND},!0)},a=function(){var e=triggermail.lytics._.dom_query("#bluecore_purchase_pixel");if(e.length>0&&void 0!==e[0]){var t=e[0].src,i=triggermail.util.getParamFromQueryString(t,"email");triggermail.identify({email:i,source:triggermail.identifySource.BLUECORE_PURCHASE_PIXEL})}},c=function(){try{triggermail.lytics._.addEvent(document,"bc:identify",triggermail.util.wrapEvent(function(e,t){triggermail.util.isValidEmail(t.email)&&triggermail.identify({email:t.email,source:triggermail.identifySource.CUSTOM,source_detail:"dom event"})}))}catch(e){}};return{init:function(){if(!triggermail.util.getUrlParam("bluecore_do_not_track")){void 0!==triggermail.Partner.init?triggermail.Partner.init():triggermail.integ.partnerInit();try{triggermail.integ.checkLoop()}catch(e){}}},partnerInit:function(e){var t=triggermail.Partner;if(void 0!==e||!triggermail.lytics._.dom_query(".translated-rtl, .translated-rtl, #goog-gt-tt").length&&!triggermail.lytics._.dom_query('meta[http-equiv="X-Translated-By"]').length){["trackProductView","trackAddToCart","trackCheckout","watchEmail"].forEach(function(e){try{t[e]()}catch(t){t.location=e,triggermail.exception(t)}});["trackRemoveFromCart","trackCheckoutStart","trackUnsubscribe","trackSubscribe","trackSearch","trackBrowseCategory","trackWishlist","trackContentView","trackStop","trackCustom"].forEach(function(e){if(t.hasOwnProperty(e))try{t[e]()}catch(t){t.location=e,triggermail.exception(t)}})}},checkLoop:function(){i(),void 0!==triggermail.Partner.disableEmailAppendPickup&&0!=triggermail.Partner.disableEmailAppendPickup||(r(),n()),o(),a(),c()}}}(),triggermail.integ.ProductFetcher=__tmClass.extend({name:function(){return this._name},readOg:function(e){},category:function(){return this._category},color:function(){return this._color},size:function(){return this._size},price:function(){return this._price},brand:function(){return this._brand},id:function(){return this._id},bluecore_parent_id:function(){return this._bluecore_parent_id},is_bluecore_parent:function(){return!1},image:function(){return this._image},url:function(){return this._url},out_of_stock:function(){return!1},tags:function(){return this._tags},to_dict:function(){try{var e={name:triggermail.core.sanitizer.sanitize("name",this.name()),category:triggermail.core.sanitizer.sanitize("category",this.category()),size:triggermail.core.sanitizer.sanitize("size",this.size()),price:triggermail.core.sanitizer.sanitize("price",this.price()),brand:triggermail.core.sanitizer.sanitize("brand",this.brand()),id:triggermail.core.sanitizer.sanitize("id",this.id()),bluecore_parent_id:triggermail.core.sanitizer.sanitize("bluecore_parent_id",this.bluecore_parent_id()),is_bluecore_parent:this.is_bluecore_parent(),image:triggermail.core.sanitizer.sanitize("image",this.image()),url:triggermail.core.sanitizer.sanitize("url",this.url()),out_of_stock:this.out_of_stock(),tags:this.tags(),color:triggermail.core.sanitizer.sanitize("color",this.color())};for(var t in e)""!==e[t]&&0!=e[t]||"out_of_stock"===t||"is_bluecore_parent"===t||delete e[t];return triggermail.lytics._.extend(e,this.extra_props()),e}catch(e){e.location="product_fetcher",triggermail.exception(e)}},extra_props:function(){return{}},fetch:function(){return this.to_dict()}}),triggermail.integ.ContentFetcher=__tmClass.extend({name:function(){return this._name},id:function(){return this._id},image:function(){return this._image},url:function(){return this._url},title:function(){return this._title},to_dict:function(){try{var e={id:triggermail.core.sanitizer.sanitize("id",this.id()),image:triggermail.core.sanitizer.sanitize("image",this.image()),name:triggermail.core.sanitizer.sanitize("name",this.name()),title:triggermail.core.sanitizer.sanitize("title",this.title()),url:triggermail.core.sanitizer.sanitize("url",this.url())};for(var t in e)""!==e[t]&&0!=e[t]||delete e[t];return triggermail.lytics._.extend(e,this.extra_props()),e}catch(e){e.location="content_fetcher",triggermail.exception(e)}},extra_props:function(){return{}},fetch:function(){return this.to_dict()}}),triggermail.integ.initServices=function(){triggermail.lytics.init(triggermail.integ.keys.lytics),triggermail.lytics=window["triggermail.lytics"],triggermail.lytics.set_config({save_referrer:!1,store_google:!1,debug:triggermail.integ.debug}),triggermail.persist.sync()},triggermail.fetcher=triggermail.integ.ProductFetcher.extend({productData:function(){try{return digitalData.product[0].productInfo}catch(e){}},name:function(){try{return this.productData().name}catch(e){}},category:function(){try{return this.productData().subType}catch(e){}},id:function(){try{return this.productData().id}catch(e){}},url:function(){try{return window.location.href.split("?")[0]}catch(e){}},brand:function(){},image:function(){try{var e=jQuery("img.product-image.ng-star-inserted").attr("src");return e.indexOf(window.location.protocol)>-1?e:window.location.protocol+e}catch(e){}},price:function(){try{return triggermail.util.price(this.productData().listRetailPrice)}catch(e){}},out_of_stock:function(){},extra_props:function(){var e={};try{var t=jQuery('mat-icon.star-rating-icon:not(:contains("_"))').length,i=jQuery('mat-icon.star-rating-icon:contains("half")').length>0?.5:0;e.rating=t+i}catch(e){}try{e.rating||(e.rating="0")}catch(e){}try{e.review_count=parseInt(jQuery("span.ratings-count").text().match(/\d+/)[0])}catch(e){}try{e.review_count||(e.review_count="0")}catch(e){}try{e.memory_capacity=jQuery("button.mat-flat-button.memory-option.selected").text().trim()}catch(e){}try{e.col=jQuery("button.color-option.selected.ng-star-inserted").attr("data-analytics-value").trim()}catch(e){}return e}}),triggermail.TMO=function(){return{retrieveRelatedAccIds:function(){try{return jQuery.map(jQuery(".slick-track").last().find("img"),function(e){var t=jQuery(e).attr("src").match(/accessories\/(.+)\//);if(t)return t[1].trim()}).join(",")}catch(e){}},checkIfListenersPresent:function(){try{var e=jQuery._data(document,"events"),t=Object.keys(e).reduce(function(t,i){return t.concat(e[i])},[]);return jQuery.map(t,function(e){return e.data})}catch(e){}},listenersList:["add_to_cart","start_checkout","save_cart","save_cart_homepage","retrieve_cart","checkout_identify","step_1_identify","save_for_store","make_appointment","fas_header","fas_footer","fas_pdp"],trackProductView:function(){triggermail.TMO.setPdpViewListeners(),triggermail.TMO.checkViewCart(),triggermail.TMO.checkSearch(),setInterval(function(){try{for(var e=triggermail.TMO.checkIfListenersPresent(),t=0;t<triggermail.TMO.listenersList.length;t++)-1===e.indexOf(triggermail.TMO.listenersList[t])&&triggermail.TMO.setListener(triggermail.TMO.listenersList[t])}catch(e){}},2e3)},setListener:function(e){"add_to_cart"===e?triggermail.TMO.setAddToCartListener("add_to_cart"):"start_checkout"===e?triggermail.TMO.setStartCheckoutListener("start_checkout"):"save_cart"===e?triggermail.TMO.setSaveCartListener("save_cart"):"save_cart_homepage"===e?triggermail.TMO.setSaveCartHomepageListener("save_cart_homepage"):"retrieve_cart"===e?triggermail.TMO.setRetrieveCartListener("retrieve_cart"):"save_for_store"===e?triggermail.TMO.setSaveForStoreListener("save_for_store"):"checkout_identify"===e?triggermail.TMO.setCheckoutIdentifyListener("checkout_identify"):"step_1_identify"===e?triggermail.TMO.setStepOneIdentifyListener("step_1_identify"):"make_appointment"===e&&triggermail.TMO.setMakeAppointmentListener("make_appointment")},checkPageType:function(){try{return digitalData.page.pageInfo.pageType}catch(e){}},currentURL:window.location.href,addPDPlisteners:jQuery(document).on("click","body",function(){try{setTimeout(function(){triggermail.TMO.currentURL!==window.location.href&&(triggermail.TMO.currentURL=window.location.href,triggermail.TMO.setPdpViewListeners())},1e3)}catch(e){}}),setPdpViewListeners:function(){var e=function(){try{if("Product Details"===triggermail.TMO.checkPageType())try{var e=new triggermail.fetcher;if(void 0!==e.id()&&""!==e.id()){triggermail.view(e.to_dict());try{Math.random()<.02&&setTimeout(function(){var t=triggermail.TMO.retrieveRelatedAccIds(),i=t;void 0!==i&&""!==i&&triggermail.view({id:e.id(),related_accessories_ids:i},{partial:!0})},5e3)}catch(e){}}}catch(e){}}catch(e){}};setTimeout(e,2e3)},setAddToCartListener:function(e){jQuery(document).on("mousedown",'button[data-testid="add-to-cart-button"]',e,function(){try{var e=new triggermail.fetcher;void 0!==e.id()&&""!==e.id()&&triggermail.add_to_cart({id:e.id()})}catch(e){}})},checkViewCart:function(){if(window.location.pathname.indexOf("/cart")>-1){!function(){setTimeout(function(){try{var e=jQuery.map(window.digitalData.cart.product,function(e,t){if("softgood"!==e.productInfo.type&&"DATASERVICE_SKU"!==e.productInfo.id&&"SIMKIT"!==e.productInfo.subType)return{id:e.productInfo.id}});e.length>0&&triggermail.view_cart({products:e})}catch(e){}try{var t=triggermail.util.cookie.parse("tmobglobalshareddata");void 0!==t&&void 0!==t.abandonCartURL&&""!==t.abandonCartURL&&triggermail.customer_patch({cart_url:t.abandonCartURL})}catch(e){}},5e3)}()}},setStartCheckoutListener:function(e){jQuery(document).on("mousedown",'button[data-testid="price-total-checkout-cta"]',e,function(){try{triggermail.custom("started_checkout",{})}catch(e){}})},setMakeAppointmentListener:function(e){jQuery(document).on("click",'form[name="appointmentForm"] .store-locator-primary-btn',e,function(){try{triggermail.custom("made_appointment",{})}catch(e){}})},setSaveCartListener:function(e){try{jQuery(document).on("click",'button[data-testid="save-cart-modal-save-button"]',e,function(){try{var e=jQuery(document).find('input[type="email"]').val();triggermail.util.isValidEmail(e)&&(triggermail.identify({email:e,source:"custom"}),setTimeout(function(){triggermail.custom("saved_cart",{})},1e3),setTimeout(function(){var e=triggermail.util.cookie.parse("tmobglobalshareddata");void 0!==e&&void 0!==e.saveCartURL&&""!==e.saveCartURL&&triggermail.customer_patch({saved_cart_url:e.saveCartURL})},4500))}catch(e){}})}catch(e){}},setSaveCartHomepageListener:function(e){jQuery(document).on("click",'button[type="submit"][aria-label="Complete in store"]',e,function(){try{var e=jQuery(document).find("input#email").val();triggermail.util.isValidEmail(e)&&(triggermail.identify({email:e,source:"custom"}),setTimeout(function(){triggermail.custom("saved_cart",{})},1e3),setTimeout(function(){var e=triggermail.util.cookie.parse("tmobglobalshareddata");void 0!==e&&void 0!==e.saveCartURL&&""!==e.saveCartURL&&triggermail.customer_patch({saved_cart_url:e.saveCartURL})},1e3))}catch(e){}})},setRetrieveCartListener:function(e){jQuery(document).on("click",'button[type="submit"][aria-label="Retrieve cart"]',e,function(){try{var e=jQuery(document).find("input#email").val();triggermail.util.isValidEmail(e)&&triggermail.identify({email:e,source:"email capture popup"})}catch(e){}})},setSaveForStoreListener:function(e){jQuery(document).on("click",'button[pdl-dynamic-link-click-data*="Finalize In Store"]',e,function(){try{var e=jQuery(document).find("input#finalizeInStoreEmail").val();triggermail.util.isValidEmail(e)&&(triggermail.identify({email:e,source:"custom",source_detail:"save for store"}),setTimeout(function(){triggermail.custom("saved_for_store",{})},1e3))}catch(e){}})},checkSearch:function(){try{if(digitalData.search.term){var e=digitalData.search.term;triggermail.search({search_term:e})}}catch(e){}},setCheckoutIdentifyListener:function(e){try{jQuery(document).on("blur",'input[type="email"]',e,function(e){try{var t=jQuery(e.target).val();triggermail.util.isValidEmail(t)&&triggermail.identify({email:t,source:triggermail.identifySource.CHECKOUT_FLOW})}catch(e){}})}catch(e){}},setStepOneIdentifyListener:function(e){jQuery(document).on("click","input#infoNextButton",e,function(){try{var e=jQuery('input[name="email"]').val(),t=jQuery('input[name="shipZip"]').val();triggermail.util.isValidEmail(e)&&triggermail.identify({email:e,zip:t,source:"checkout flow"})}catch(e){}})},setCartProdViewListeners:function(){window.location.pathname.indexOf("/cart")>-1&&jQuery(document).on("click",".modal-content",function(){setTimeout(function(){try{var e=window.digitalData.events.slice(-1)[0].product.id;""!==e&&triggermail.view({id:e},{partial:!0})}catch(e){}},3e3)})},trackAddToCart:function(){},trackRemoveFromCart:function(){},trackCheckoutStart:function(){},trackCheckout:function(){},trackSearch:function(){},trackUnsubscribe:function(){},trackSubscribe:function(){},watchEmail:function(){try{null!==triggermail.util.cookie.get("toop_data")&&triggermail.util.cookie.remove("toop_data")}catch(e){}try{null!==triggermail.util.cookie.get("t_mail")&&(cust={email:triggermail.util.cookie.get("t_mail"),source:"account login"},triggermail.util.isValidEmail(cust.email)&&triggermail.identify(cust)),window.location.href.indexOf("account")>-1&&window.location.href.indexOf("profile")>-1&&setTimeout(function(){try{var e=$("#email_id").text().trim();if(triggermail.util.isValidEmail(e))if(null===triggermail.util.cookie.get("tmoRememberCust")){var t={email:e,name:$("#customer_id").text().trim()};if(null!==triggermail.util.cookie.get("TMobileCreditClass"))try{t.credit_class=triggermail.util.cookie.get("TMobileCreditClass").split("=")[1]}catch(e){}
triggermail.identify(t)}else triggermail.unsubscribe({email:e,source:"opt_out"})}catch(e){}},1e3)}catch(e){}try{var e=triggermail.util.getParamFromQueryString(triggermail.util.cookie.get("TmobilePrepaidActivationCookie"),"Email");triggermail.util.isValidEmail(e)&&triggermail.identify({email:triggermail_email_address})}catch(e){}window.triggermail_email_address&&triggermail.identify({email:triggermail_email_address});try{window.location.href.indexOf("offers/deals-hub")>-1&&jQuery(document).on("click",".submit-cta",function(){var e=jQuery(".field-group #3cc7fe53ccda9c02c4b6cc07b33d65859e530691-email").val();triggermail.util.isValidEmail(e)&&triggermail.identify({email:e,source:"email signup"})})}catch(e){}},trackCustom:function(){},env:function(){var e=window.location.href;return e.indexOf("www.t-mobile.com/")>-1||e.indexOf("secure-checkout.t-mobile.com/")>-1?"p":"d"},keys:{lytics:{d:"dev",p:"t_mobile"}}}}(),triggermail.prepaidFetcher=triggermail.fetcher.extend({id:function(){try{return _PDL.productDetails.productID}catch(e){}},name:function(){return _PDL.productDetails.productName},category:function(){return window.location.pathname.indexOf("tablets-and-devices")>-1?"internet device":"phone"},image:function(){var e=jQuery(".gallery .slide img").attr("src");return e.indexOf("1.1.")>-1?"":-1===e.indexOf("placeholder")?e:void 0},price:function(){return triggermail.util.price(_PDL.productDetails.productPrice)},extra_props:function(){var e={};return e.is_sim="false",this.name().toLowerCase().indexOf("sim")>-1&&(e.is_sim="true"),"true"==e.is_sim&&(window.location.pathname.indexOf("tablets-and-devices")>-1?(e.is_tablet_sim="true",e.is_phone_sim="false"):(e.is_tablet_sim="false",e.is_phone_sim="true")),e}}),triggermail.TMO_Prepaid=function(){return{trackProductView:function(){jQuery(window).ready(triggermail.util.wrapEvent(function(){if(window._PDL&&void 0!==_PDL.productDetails&&(window.location.pathname.match(/\/prepaid-phone\//)||window.location.pathname.match(/\/phone-plans\//)||window.location.pathname.match(/\/internet-devices\//)||window.location.pathname.match(/\/prepaid-accessories\//)||window.location.pathname.match(/\/tablets-and-devices\//))){var e=new triggermail.prepaidFetcher;triggermail.view(e.to_dict())}}))},trackAddToCart:function(){if(window._PDL&&void 0!==_PDL.productDetails&&(window.location.pathname.match(/\/prepaid-phone\//)||window.location.pathname.match(/\/phone-plans\//)||window.location.pathname.match(/\/internet-devices\//)||window.location.pathname.match(/\/prepaid-accessories\//)||window.location.pathname.match(/\/tablets-and-devices\//))&&jQuery('a[data-cart-action="add"]').on("click",function(){var e=window._PDL&&window._PDL.productDetails.productID;e.length>0&&triggermail.add_to_cart({id:e})}),window.location.href.indexOf("/cart?")>-1){var e=[];jQuery.each(jQuery(".remove-link"),function(t,i){e.push({id:jQuery(i).attr("data-item-sku")})}),triggermail.view_cart({products:e})}},trackRemoveFromCart:function(){},trackCheckoutStart:function(){window.location.href.indexOf("TMOCustomerInformationView")>-1&&(jQuery(document).on("click","#next-step",triggermail.util.wrapEvent(function(){var e=jQuery("input[name=billemail1]").val(),t=jQuery("input[name=billfirstName]").val(),i=jQuery("input[name=orderId]").val(),r=jQuery("input[name=billphone1]").val(),n={email:e,name:t,order_id:i,phone:r,source:triggermail.identifySource.CHECKOUT_FLOW};triggermail.util.isValidEmail(e)&&triggermail.identify(n)})),jQuery(document).on("focusout","#coEmail",triggermail.util.wrapEvent(function(){var e=jQuery("input[name=billemail1]").val();triggermail.util.isValidEmail(e)&&triggermail.identify({email:e,source:triggermail.identifySource.CHECKOUT_FLOW})})))},trackSearch:function(){},trackSubscribe:function(){},trackUnsubscribe:function(){},trackCheckout:function(){if(window.location.href.indexOf("OrderOKView")>-1){var e=_PDL.cart.orderID,t=_PDL.cart.orderAmount,i=triggermail.util.findEmail(jQuery(".order-summary").text()),r=[];if(_PDL.cart.prepaidDevices.length>0)for(var n=0;n<_PDL.cart.prepaidDevices.length;n++)r.push({id:_PDL.cart.prepaidDevices[n].device.deviceID});triggermail.purchase({order_id:e,total:t,email:i,products:r})}},watchEmail:function(){window.location.href.indexOf("account")>-1&&window.location.href.indexOf("profile")>-1&&setTimeout(triggermail.util.wrapEvent(function(){var e=jQuery("#email_id").text().trim();if(triggermail.util.isValidEmail(e))if(null===triggermail.util.cookie.get("tmoRememberCust")){var t={email:e,name:jQuery("#customer_id").text().trim()};if(null!==triggermail.util.cookie.get("TMobileCreditClass"))try{t.credit_class=triggermail.util.cookie.get("TMobileCreditClass").split("=")[1]}catch(e){}if(null!==JSON.parse(triggermail.util.cookie.get("TMobilePlansConfig")).PlanType)try{t.plan_type=JSON.parse(triggermail.util.cookie.get("TMobilePlansConfig")).PlanType}catch(e){}triggermail.identify(t)}else triggermail.unsubscribe({email:e,source:"opt_out"})}),1e3);var e=triggermail.util.getParamFromQueryString(triggermail.util.cookie.get("TmobilePrepaidActivationCookie"),"Email");triggermail.util.isValidEmail(e)&&triggermail.identify({email:triggermail_email_address}),window.triggermail_email_address&&triggermail.identify({email:triggermail_email_address}),window.location.href.indexOf("ActivateReview")>-1&&triggermail.track("identify",{customer:{activated:!0}})},env:function(){var e=window.location.href;return e.indexOf("prepaid-phones.t-mobile.com/")>-1||e.indexOf("secure-checkout.t-mobile.com")>-1?"p":"d"},keys:{lytics:{d:"dev",p:"t_mobile_prepaid"}}}}(),triggermail.initialize=function(){triggermail.integ.keys={},window.location.href.indexOf("prepaid-phones.t-mobile.com/")>-1?triggermail.util.cookie.set("tmenv","prepaid",365,!0):-1==window.location.href.indexOf("/shop/cart")&&-1==window.location.href.indexOf("secure-checkout.t-mobile.com")&&triggermail.util.cookie.set("tmenv","postpaid",365,!0),"prepaid"==triggermail.util.cookie.get("tmenv")?triggermail.Partner=triggermail.TMO_Prepaid:triggermail.Partner=triggermail.TMO;var e=triggermail.Partner.env();triggermail.integ.keys.lytics=triggermail.Partner.keys.lytics[e],triggermail.integ.debug=!1,triggermail.integ.initServices(),triggermail.init(),triggermail.integ.init();var t=triggermail.util.getUrlParam("__auto_demo__");""!=t&&(triggermail.demo(),triggermail.identify({email:t}))},e();var t=triggermail.lytics.config?triggermail.lytics.config.token:null,i=triggermail.Partner.keys.lytics?triggermail.Partner.keys.lytics.p:null;if(partner=t||i,partner){var r=document.createElement("script");r.type="text/javascript",r.setAttribute("data-cfasync","false"),r.src=("https:"===document.location.protocol?"https://":"http://")+"storage.googleapis.com/bluecore_addons/"+partner+".ju.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(r,n)}}else window.setTimeout(__xx_checkJquery,100)}window.jQuery||function(){var e=document.createElement("script");e.type="text/javascript",e.src=("https:"===document.location.protocol?"https://":"http://")+"ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),__xx_checkJquery();